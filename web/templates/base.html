<!DOCTYPE html>
<html>
	<head>
		<meta charset="utf-8">
		<meta http-equiv="X-UA-Compatible" content="IE=edge">
		<meta name="viewport" content="width=device-width, initial-scale=1.0"/>
		<title>Magic Collector</title>


		<link type="text/css" rel="stylesheet" href="{{ url_for('static', filename='css/materialize.min.css') }}"  media="screen,projection"/>
		<link type="text/css" href="{{ url_for('static', filename='css/custom.css') }}" rel="stylesheet">
	</head>

	<body>
		{% macro get_menu() -%}
			{% if is_logged_in() -%}
			<li><a href="{{ url_for('home') }}">Collection</a></li>
			<li><a href="{{ url_for('decks') }}">Decks</a></li>
			<li><a href="{{ url_for('logout') }}">Log Out</a></li>
			{%- else -%}
			<li><a href="{{ url_for('login') }}">Log In</a></li>
			{%- endif %}
		{%- endmacro %}

		<nav class="light-blue lighten-1" role="navigation">
			<div class="nav-wrapper container"><a id="logo-container" href="#" class="brand-logo">Magic Collector</a>
				<ul class="right hide-on-med-and-down">
					{{ get_menu() }}
				</ul>

				<ul id="nav-mobile" class="sidenav">
					{{ get_menu() }}
				</ul>
				<a href="#" data-target="nav-mobile" class="sidenav-trigger"><i class="material-icons">menu</i></a>
			</div>
		</nav>

		{% block content %}
		{% endblock %}

		<footer class="page-footer orange">
			<div class="footer-copyright">
				<div class="container">
					&copy; 2017 Zach Lang
				</div>
			</div>
		</footer>

		<script type="text/javascript" src="{{ url_for('static', filename='js/jquery.min.js') }}"></script>
		<script type="text/javascript" src="{{ url_for('static', filename='js/materialize.min.js') }}"></script>

		<script>
			function show_loading(elem) {
				elem.html('<div class="col s12 offset-s6">\
							<div class="preloader-wrapper big active">\
								<div class="spinner-layer spinner-blue-only">\
									<div class="circle-clipper left">\
										<div class="circle"></div>\
									</div>\
									<div class="gap-patch">\
										<div class="circle"></div>\
									</div>\
									<div class="circle-clipper right">\
										<div class="circle"></div>\
									</div>\
								</div>\
							</div>\
						</div>');
			}

			function escapeHTML(str) {
				var escapes = {
					'&': '&amp;',
					'<': '&lt;',
					'>': '&gt;',
					'"': '&quot;',
					"'": '&#x27;'
				};
				return ('' + str).replace(/[&<>"']/g, function(match) {
					return escapes[match];
				});
			}

			function ajax_user_aborted(jqXHR) {
				return !jqXHR.getAllResponseHeaders();
			}

			$('.validate').on('keyup', function() {
				$(this).removeClass('valid invalid');
			});

			function check_form_valid(form) {
				var valid = true;
				form.find('.validate').removeClass('valid invalid').each(function() {
					if ($(this).val()) $(this).addClass('valid');
					else {
						$(this).addClass('invalid');
						valid = false;
					}
				});

				return valid;
			}

			$('.sidenav').sidenav();

			document.addEventListener('DOMContentLoaded', function() {
				M.Modal.init(document.querySelectorAll('.modal'));
			});
		</script>

		{% block script %}
		{% endblock %}
	</body>
</html>
